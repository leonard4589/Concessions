<!DOCTYPE html>
<html>
    <head>
        <title>
            Concessions Inventory and Orders
        </title>
        <style>
            table, th, td {
            border: 1px solid;
            }

        </style> 
    </head>
    <body>
        <h1>
            Concessions
        </h1>
        <h2>
            Starting Inventory:
        </h2>
        <table>
            <tr>
              <th>Item:</th>
              <th>Quantity:</th>
            </tr>
            <tr>
              <td>Gold Fish</td>
              <td>20</td>
            </tr>
            <tr>
              <td>Motts</td>
              <td>40</td>
            </tr>
            <tr>
              <td>Pop Tarts</td>
              <td>15</td>
            </tr>
          </table>
        <h2>
            Today's Orders:
        </h2>
        <table>
            <tr>
            <th>Name:</th>
            <th>Item:</th>
            <th>Quantity:</th>
            </tr>
            <tr>
              <td><input 
                type="text" id = "name" placeholder = "John Doe"></td>
              <td>
                <select name="items" id="item">
                  <option value="Gold Fish">Gold Fish</option>
                  <option value="Motts">Motts</option>
                  <option value="Pop Tart">Pop Tart</option>
                </select>
              </div>
              </td>
              <td><input 
                type="number" id="quantity" name="quantity" min="1" max="10" placeholder = "3">
              </td>
            </tr>
          </table>
        <h2>
          <button type="button" id="submit">Submit</button>
          <br>
      <div id="server"></div>
          <br>
            Ending Inventory:
        </h2>
        <table>
            <tr>
                <th>Item:</th>
                <th>Starting Quantity:</th>
                <th>Total Ordered:</th>
                <th>Ending Quantity:</th>
              </tr>
              <tr>
                <td>Gold Fish</td>
                <td>20</td>
                <td>...</td>
                <td>...</td>
              </tr>
              <tr>
                <td>Motts</td>
                <td>40</td>
                <td>...</td>
                <td>...</td>
              </tr>
              <tr>
                <td>Pop Tarts</td>
                <td>15</td>
                <td>...</td>
                <td>...</td>
              </tr>
          </table>
        <h2>
            Inventory Needed:
        </h2>
        <table>
            <tr>
                <th>Item:</th>
                <th>Current Quantity:</th>
                <th>Ammount Needed:</th>
              </tr>
              <tr>
                <td>...</td>
                <td>...</td>
                <td>...</td>
              </tr>
              <tr>
                <td>...</td>
                <td>...</td>
                <td>...</td>
              </tr>
          </table>
        <h2>
            History:
        </h2>
        <table id="history">
            <tr>
                <th>Date:</th>
                <th>Name:</th>
                <th>Item:</th>
                <th>Quantity:</th>
              </tr>
            
          </table>
        <h2>
    </body>
    <script>
      div = document.getElementById("submit");
      div.addEventListener("click", save);
    
      function save(){
        url = 'phpdata.php';

        record = new XMLHttpRequest();
        record.onreadystatechange = function(){
          if (this.readyState == 4 && this.status == 200) {
            document.getElementById("server").innerHTML = this.responseText;
            let response = JSON.parse(this.responseText);
            var table = document.getElementById("history");
            var row = table.insertRow();
            var cell1 = row.insertCell();
            var d = new Date(response["Time"]*1000)
            cell1.innerHTML = d.toLocaleString("en-US");
            var cell2 = row.insertCell();
            var cell3 = row.insertCell();
            var cell4 = row.insertCell();
            cell2.innerHTML = (response["Name"]);
            cell3.innerHTML = (response["Item"]);
            cell4.innerHTML = (response["Quantity"]);
          }

        }

        name = document.getElementById("name").value;
        console.log(name);
        params = `?Name=${name}`;
        console.log(params);
        url += params;

        item = document.getElementById("item").value;
        console.log(item);
        params = `&Item=${item}`;
        console.log(params);
        url += params;

        quantity = document.getElementById("quantity").value;
        console.log(quantity);
        params = `&Quantity=${quantity}`;
        console.log(params);
        url += params;


        console.log(url)
        record.open("GET", url, true);
        record.send();
      }

      
      </script>
</html>